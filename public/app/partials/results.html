<div class="ui small about basic button" ng-click="showHelp()">
	About This Site
</div>
<img class="ui medium image" src="/images/logo-app.png" style="margin-bottom: 1em;" />
<div id="query" class="ui huge fluid labeled action input">
	<div class="ui label">
		Location
	</div>
	<input type="text" placeholder="Enter address, city, state, and/or zipcode" ng-model="query" enter-key="requery()">
	<button class="ui primary button" style="font-size: 1em;" ng-click="requery()">Search</button>
</div>
<div class="ui divider" style="clear: both;"></div>
<div class="ui icon negative message" ng-if="locationError">
	<i class="warning sign icon"></i>
	<div class="content">
		<div class="header">Location Error</div>
		<p>The location you searched is too general or outside of the United States, please search for a US city or zipcode.</p>
	</div>
</div>
<div class="ui small basic left labeled icon button" ng-click="showHelp()" style="float: right;">
	<i class="ui question icon"></i>
	About
</div>
<p>Showing results for: <b>{{location}}</b></p>
<div class="ui stackable grid" style="clear: both;">
	<div class="ten wide column">
		<div class="ui segment">
			<i class="circular question hoverable icon" style="float: right;" data-label="air"></i>
			<h3 class="ui floated left header">Daily Air Quality Forecast</h3>
			<div class="ui divider" style="clear: both;"></div>
			<div class="description" ng-if="!airLoading && airData.location">
				<p>{{airData.location}}</p>
				<table class="ui small unstackable air table">
					<thead>
						<tr>
							<th>Contaminant</th>
							<th class="center aligned" ng-repeat="date in airData.forecastDates">{{truncateDate(date)}}</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="(contaminant, forecast) in airData.forecasts">
							<td>
								{{contaminant}}
								<i class="circular question icon" data-html="{{airContaminantDescriptions[contaminant]}}"></i>
							</td>
							<td class="center aligned" ng-repeat="date in airData.forecastDates">
								<a class="ui empty circular label" ng-style="{'background-color': airQualityCodes[forecast[date]].color}" data-title="{{forecast[date] || 'Not available'}}" data-content="{{airQualityCodes[forecast[date]].desc}}"></a>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="description" ng-if="!airLoading && airData.error">
				{{airData.error}}
			</div>
			<div class="description" ng-if="!airLoading && !airData">
				No data was available for your query
			</div>
			<div class="ui active inverted dimmer" ng-if="airLoading">
				<div class="ui loader"></div>
			</div>
		</div>
	</div>
	<div class="six wide column">
		<div class="ui segment">
			<i class="circular question hoverable icon" style="float: right;" data-label="uv"></i>
			<h3 class="ui floated left header">Today's UV Index</h3>
			<div class="ui divider" style="clear: both;"></div>
			<div class="ui icon message {{uvData.color}}" ng-if="!uvLoading && uvData">
				<i class="{{uvData.icon}} icon"></i>
				<div class="content">
					<div class="header">{{uvData.rating}} - {{uvData.header}}</div>
					<p>{{uvData.text}}</p>
				</div>
			</div>
			<div class="description" ng-if="!uvLoading && !uvData">
				No data was available for your query
			</div>
			<div class="ui active inverted dimmer" ng-if="uvLoading">
				<div class="ui loader"></div>
			</div>
		</div>
	</div>
</div>
<div class="ui segment">
	<i class="circular question hoverable icon" style="float: right;" data-label="water"></i>
	<h3 class="ui floated left header">Water Quality Health Violations</h3>
	<div class="ui divider" style="clear: both;"></div>
	<h4 class="ui center aligned icon header" ng-if="!waterLoading && violations.length == 0">
		<i class="circular check icon"></i>
		No Violations Found
	</h4>
	<div class="ui styled fluid accordion" ng-if="violations.length != 0">
		<div ng-repeat="category in waterViolationCodes | filter: hasViolations">
			<div class="title">
				<i class="dropdown icon"></i>
				{{category.label}} - {{getViolations(category).length}} violations from {{getViolationFacilities(category).length}} location(s)
			</div>
			<div class="content">
				<table class="ui celled unstackable small compact striped table">
					<thead>
						<tr>
							<th class="hoverable" ng-repeat="header in tableHeaders" ng-click="changeSort(header.field)">
								<i class="circular question icon" data-html="{{header.desc}}" ng-if="header.desc"></i>
								{{header.label}}
								<i ng-if="sortField == header.field" class="ui sort {{ reverse ? 'ascending' : 'descending' }} icon"></i>
								<i ng-if="sortField != header.field" class="ui sort icon"></i>
							</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="violation in getViolations(category) | orderBy: sortField : reverse">
							<td>{{violation.facilityName}}</td>
							<td>{{violation.contaminantName}}</td>
							<td>{{violation.startDate.format('MM/DD/YY')}}</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<div id="map" ng-if="affectedFacilities.length != 0"></div>
	<div class="ui active inline centered loader" ng-if="waterLoading"></div>
</div>

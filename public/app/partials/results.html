<div class="ui huge fluid labeled action input">
	<div class="ui label">
		Location
	</div>
	<input type="text" placeholder="Enter address, city, state, and/or zipcode" ng-model="query" enter-key="requery()">
	<button class="ui primary button" style="font-size: 1em;" ng-click="requery()">Search</button>
</div>
<div class="ui divider" style="clear: both;"></div>
<div class="ui icon negative message" ng-if="locationError">
	<i class="warning sign icon"></i>
	<div class="content">
		<div class="header">Location Error</div>
		<p>The location you searched is too general or outside of the United States, please search for a US city or zipcode.</p>
	</div>
</div>
<div class="ui small basic left labeled icon button" ng-click="showHelp()" style="float: right;">
	<i class="ui question icon"></i>
	About
</div>
<p>Showing results for: <b>{{location}}</b></p>
<div class="ui stackable grid" style="clear: both;">
	<div class="ten wide column">
		<div class="ui fluid card">
			<div class="content">
				<div class="header">Air Quality</div>
				<div class="description" ng-if="!airLoading && airData.location">
					<p>{{airData.location}}</p>
					<table class="ui small unstackable table">
						<thead>
							<tr>
								<th>Contaminant</th>
								<th class="center aligned" ng-repeat="date in airData.forecastDates">{{truncateDate(date)}}</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="(contaminant, forecast) in airData.forecasts">
								<td>
									{{contaminant}}
									<i class="circular question icon" data-html="{{airContaminantDescriptions[contaminant]}}"></i>
								</td>
								<td class="center aligned" ng-repeat="date in airData.forecastDates">
									<a class="ui empty circular label" style="background-color: {{airQualityCodes[forecast[date]].color}};" data-title="{{forecast[date] || 'Not available'}}" data-content="{{airQualityCodes[forecast[date]].desc}}"></a>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="description" ng-if="!airLoading && airData.error">
					{{airData.error}}
				</div>
				<div class="description" ng-if="!airLoading && !airData">
					No data was available for your query
				</div>
				<div class="ui active inverted dimmer" ng-if="airLoading">
					<div class="ui loader"></div>
				</div>
			</div>
		</div>
	</div>
	<div class="six wide column">
		<div class="ui fluid card">
			<div class="content">
				<div class="header">Today's UV Index</div>
				<div class="ui icon message {{uvData.color}}" ng-if="!uvLoading && uvData">
					<i class="{{uvData.icon}} icon"></i>
					<div class="content">
						<div class="header">{{uvData.rating}} - {{uvData.header}}</div>
						<p>{{uvData.text}}</p>
					</div>
				</div>
				<div class="description" ng-if="!uvLoading && !uvData">
					No data was available for your query
				</div>
				<div class="ui active inverted dimmer" ng-if="uvLoading">
					<div class="ui loader"></div>
				</div>
			</div>
		</div>
		<div class="ui hoverable blue link segment" ng-class="{inverted: signUpHover}" ng-mouseenter="signUpHover = true" ng-mouseleave="signUpHover = false" style="font-size: .75em;">
			<h4 class="ui centered header">Sign up for notifications via phone or email</h4>
		</div>
	</div>
</div>
<div class="ui segment">
	<h3 class="ui header">
		Water Quality Health Violations
		<div class="sub header">{{affectedFacilities.length}} out of {{facilities.length}} facilities have violations</div>
	</h3>
	<p>Below are drinking water quality violations for water treatment facilities in this area.</p>
	<h4 class="ui center aligned icon header" ng-if="!waterLoading && violations.length == 0">
		<i class="circular check icon"></i>
		No Violations Found
	</h4>
	<div id="map" ng-if="facilities.length != 0"></div>
	<div class="ui styled fluid accordion" ng-if="violations.length != 0">
		<div ng-repeat="category in waterViolationCodes | filter: hasViolations">
			<div class="title">
				<i class="dropdown icon"></i>
				{{category.label}} - {{getViolations(category).length}} violations
			</div>
			<div class="content">
				<table class="ui celled unstackable small compact striped table">
					<thead>
						<tr>
							<th class="hoverable" ng-repeat="header in tableHeaders" ng-click="changeSort(header.field)">
								<i class="circular question icon" data-html="{{header.desc}}" ng-if="header.desc"></i>
								{{header.label}}
								<i ng-if="sortField == header.field" class="ui sort {{ reverse ? 'ascending' : 'descending' }} icon"></i>
							</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="violation in getViolations(category) | orderBy: sortField : reverse">
							<td>{{violation.facilityName}}</td>
							<td>{{violation.contaminantName}}</td>
							<td>{{violation.startDate.format('MM/DD/YY')}}</td>
							<td>{{violation.endDate.format('MM/DD/YY')}}</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<div class="ui active inline centered loader" ng-if="waterLoading"></div>
</div>
<div id="about" class="ui modal">
	<i class="close icon"></i>
	<div class="header">
		<i class="circular green leaf icon"></i>
		About This Page
	</div>
	<div class="content">
		<p>
			This page gathers environmental and health information that EPA provides through many systems and web sites into one screen view.
			The user can select a location and available information related to air and water quality will be returned.  Some of the data are
			real-time monitoring information about environmental conditions for the selected location. Other data provides longer term
			information about past violations that may be useful to know about. Additional data sets will be added in the future.
		</p>
		<h3 class="ui header">Data Sets Currently Available</h3>
		<h4 class="ui header">AirNow</h4>
		<p>
			These data show air quality information for key particulates and pollutants that are indicators of overall air quality.
			Data for today and the next 2 days are displayed using Green/Yellow/Red color coded indicators.
		</p>
		<h4 class="ui header">Ultraviolet (UV) Conditions</h4>
		<p>
			This data set provides a numeric UV quality index representing an overall measure of air quality for a location.
		</p>
		<h4 class="ui header">Safe Drinking Water Act Information Systems (SDWIS)</h4>
		<p>
			These data show a history of reporting and measuring violations and exceedances of regulated contaminants that are greater than the
			agreed upon maximum level allowed in safe drinking water. These data provide a longer-term view of the history of violations in a
			specific geographic area, at a particular water well, or from a regulated water system.
		</p>
	</div>
</div>
